import*as a from"d3";const w=m=>{const r=window.innerWidth*.9,c=window.innerHeight*.9,d=a.scaleLinear().domain([0,5]).range(["hsl(152,80%,80%)","hsl(228,30%,40%)"]).interpolate(a.interpolateHcl),s=(t=>a.pack().size([r,c]).padding(3)(a.hierarchy(t).sum(n=>n.lines??0).sort((n,o)=>o.lines??0-n.lines??0)))(m.data),l=a.create("svg").attr("viewBox",`-${r} -${c} ${2*r} ${2*c}`).attr("width",r).attr("height",c).attr("style",`max-width: 100%; height: auto; display: block; margin: 0 -14px; background: ${d(0)}; cursor: pointer;`),p=l.append("g").selectAll("circle").data(s.descendants().slice(1)).join("circle").attr("fill",t=>t.children?d(t.depth):"white").attr("pointer-events",t=>t.children?null:"none").on("mouseover",function(){a.select(this).attr("stroke","#000")}).on("mouseout",function(){a.select(this).attr("stroke",null)}).on("click",(t,n)=>e!==n&&(f(t,n),t.stopPropagation())),h=l.append("g").style("font","20px sans-serif").style("padding","2px").style("background","white").attr("pointer-events","none").attr("text-anchor","middle").selectAll("text").data(s.descendants()).join("text").style("fill-opacity",0).style("display",t=>t.parent===s?"inline":"none").text(t=>t.data.name);l.on("click",t=>f(t,s));let e=s,u;y([e.x,e.y,e.r*2]);function y(t){const n=r/t[2];u=t,h.attr("transform",o=>`translate(${(o.x-t[0])*n},${(o.y-t[1])*n})`),p.attr("transform",o=>`translate(${(o.x-t[0])*n},${(o.y-t[1])*n})`),p.attr("r",o=>o.r*n)}function f(t,n){e=n;const o=l.transition().duration(t.altKey?7500:750).tween("zoom",i=>{const g=a.interpolateZoom(u,[e.x,e.y,e.r*2]);return x=>y(g(x))});h.filter(function(i){return i.parent===e||this.style.display==="inline"}).transition(o).style("fill-opacity",i=>i.parent===e?1:0).on("start",function(i){i.parent===e&&(this.style.display="inline")}).on("end",function(i){i.parent!==e&&(this.style.display="none")})}return l.node()};export{w as default};
